opam-version: "2.0"
synopsis: "Compiler for High-Assurance and High-Speed Cryptography"
description: """
Jasmin is a workbench for high-assurance and high-speed cryptography. Jasmin
implementations aim at being efficient, safe, correct, and secure.
"""
maintainer: "Jean-Christophe LÃ©chenet <jean-christophe.lechenet@inria.fr>"
authors: ["Jasmin authors and contributors"]
license: "MIT"
homepage: "https://github.com/jasmin-lang/jasmin"
bug-reports: "https://github.com/jasmin-lang/jasmin/issues"
dev-repo: "git+https://gitlab.com/jasmin-lang/jasmin-compiler.git"
x-maintenance-intent: ["(latest)"]

build: [
  [make "all"]
]
install: [
  [make "install" "PREFIX=%{prefix}%"]
]
depends: [
  "ocaml" {>= "4.12" & build}
  "batteries" {>= "3.5"}
  "cmdliner" {>= "1.1" & build }
  "dune" {>= "3.7"}
  "menhir" {>= "20160825" & build}
  "menhirLib"
  "camlidl"
  "zarith" {>= "1.9"}
  "apron" {>= "v0.9.12"}
  "conf-ppl"
  "yojson" {>= "1.6.0"}
  "angstrom" {>= "0.14.0"}
  "ocamlfind" { build }
]
patches: ["non-gnu-install.patch"]
url {
  src: "https://github.com/jasmin-lang/jasmin/releases/download/v2025.06.1/jasmin-compiler-v2025.06.1.tar.bz2"
  checksum: "sha256=e92b42fa69da7c730b0c26dacf842a72b4febcaf4f2157a1dc18b3cce1f859fa"
}
extra-source "non-gnu-install.patch" {
  src: "https://github.com/jasmin-lang/jasmin/commit/e7309cab7a6312da3163e6aa8887900ccc36a6c7.patch?full_index=1"
  checksum: "sha256=e97788d33b103422d67a0948d998d2635db2c4be5aecc3cfeaa9bbba77653a92"
}
